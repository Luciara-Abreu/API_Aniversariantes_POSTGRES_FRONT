{"ast":null,"code":"import _regeneratorRuntime from\"C:/_PROJETOS/Agenda_Aniversariantes/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/_PROJETOS/Agenda_Aniversariantes/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/_PROJETOS/Agenda_Aniversariantes/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/_PROJETOS/Agenda_Aniversariantes/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{collection,getDocs,getFirestore,doc,deleteDoc}from\"firebase/firestore\";import{useState,useEffect}from\"react\";import firebaseConfig from\"../../services/config/firebase\";// https://www.youtube.com/watch?v=gqbXnYhvB5E&t=264s\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditUsers=function EditUsers(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUsers=_useState2[1];var db=getFirestore(firebaseConfig);var usersCollectionRef=collection(db,\"users\");// trás todos os dados que estão cadastrados no banco\nuseEffect(function(){var getUsers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data,usersCadastrados;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getDocs(usersCollectionRef);case 2:data=_context.sent;usersCadastrados=data.docs.map(function(doc){return _objectSpread(_objectSpread({},doc.data()),{},{id:doc.id});});setUsers(usersCadastrados);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getUsers(){return _ref.apply(this,arguments);};}();getUsers();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);// Deleta aniversriantes\nfunction deleteUser(_x){return _deleteUser.apply(this,arguments);}function _deleteUser(){_deleteUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){var userDoc;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:userDoc=doc(db,'users',id);_context2.next=3;return deleteDoc(userDoc);case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _deleteUser.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"ul\",{children:users.map(function(users){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"li\",{children:[users.name,/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deleteUser(users.id);},children:\"Deletar Aniversariante\"})]})});})})});};export default EditUsers;","map":{"version":3,"names":["collection","getDocs","getFirestore","doc","deleteDoc","useState","useEffect","firebaseConfig","EditUsers","users","setUsers","db","usersCollectionRef","getUsers","data","usersCadastrados","docs","map","id","deleteUser","userDoc","name"],"sources":["C:/_PROJETOS/Agenda_Aniversariantes/src/App/contexts/editUsers/index.jsx"],"sourcesContent":["import { collection, getDocs, getFirestore, doc, deleteDoc } from \"firebase/firestore\"\r\nimport { useState, useEffect } from \"react\"\r\nimport firebaseConfig from \"../../services/config/firebase\";\r\n// https://www.youtube.com/watch?v=gqbXnYhvB5E&t=264s\r\n\r\nconst EditUsers = () => {\r\n  const [users, setUsers] = useState([])\r\n  const db = getFirestore(firebaseConfig)\r\n  const usersCollectionRef = collection(db, \"users\")\r\n\r\n  // trás todos os dados que estão cadastrados no banco\r\n  useEffect(() => {\r\n    const getUsers = async () => {\r\n      const data = await getDocs(usersCollectionRef)\r\n      const usersCadastrados = (data.docs.map((doc) => ({ ...doc.data(), id: doc.id })))\r\n      setUsers(usersCadastrados)\r\n    }\r\n    getUsers()\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  // Deleta aniversriantes\r\n  async function deleteUser(id) {\r\n    const userDoc = doc(db, 'users', id)\r\n    await deleteDoc(userDoc)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <ul>\r\n        {users.map(users => {\r\n          return (\r\n            <div>\r\n              <li>{users.name}\r\n                <button onClick={() => deleteUser(users.id)}>Deletar Aniversariante</button>\r\n              </li>\r\n            </div>\r\n          )\r\n        })}\r\n      </ul>\r\n    </div>\r\n  )\r\n}\r\nexport default EditUsers\r\n"],"mappings":"mfAAA,OAASA,UAAU,CAAEC,OAAO,CAAEC,YAAY,CAAEC,GAAG,CAAEC,SAAS,KAAQ,oBAAoB,CACtF,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAOC,eAAc,KAAM,gCAAgC,CAC3D;AAAA,wFAEA,GAAMC,UAAS,CAAG,QAAZA,UAAS,EAAS,CACtB,cAA0BH,QAAQ,CAAC,EAAE,CAAC,wCAA/BI,KAAK,eAAEC,QAAQ,eACtB,GAAMC,GAAE,CAAGT,YAAY,CAACK,cAAc,CAAC,CACvC,GAAMK,mBAAkB,CAAGZ,UAAU,CAACW,EAAE,CAAE,OAAO,CAAC,CAElD;AACAL,SAAS,CAAC,UAAM,CACd,GAAMO,SAAQ,4FAAG,qLACIZ,QAAO,CAACW,kBAAkB,CAAC,QAAxCE,IAAI,eACJC,gBAAgB,CAAID,IAAI,CAACE,IAAI,CAACC,GAAG,CAAC,SAACd,GAAG,wCAAWA,GAAG,CAACW,IAAI,EAAE,MAAEI,EAAE,CAAEf,GAAG,CAACe,EAAE,IAAG,CAAC,CACjFR,QAAQ,CAACK,gBAAgB,CAAC,uDAC3B,kBAJKF,SAAQ,0CAIb,CACDA,QAAQ,EAAE,CACV;AACF,CAAC,CAAE,EAAE,CAAC,CAEN;AAAA,QACeM,WAAU,4IAAzB,kBAA0BD,EAAE,oIACpBE,OAAO,CAAGjB,GAAG,CAACQ,EAAE,CAAE,OAAO,CAAEO,EAAE,CAAC,wBAC9Bd,UAAS,CAACgB,OAAO,CAAC,yDACzB,6CAED,mBACE,kCACE,oBACGX,KAAK,CAACQ,GAAG,CAAC,SAAAR,KAAK,CAAI,CAClB,mBACE,kCACE,sBAAKA,KAAK,CAACY,IAAI,cACb,eAAQ,OAAO,CAAE,yBAAMF,WAAU,CAACV,KAAK,CAACS,EAAE,CAAC,EAAC,oCAAgC,GACzE,EACD,CAEV,CAAC,CAAC,EACC,EACD,CAEV,CAAC,CACD,cAAeV,UAAS"},"metadata":{},"sourceType":"module"}
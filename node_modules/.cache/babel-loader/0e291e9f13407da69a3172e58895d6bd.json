{"ast":null,"code":"var _jsxFileName = \"C:\\\\_PROJETOS\\\\Agenda_Aniversariantes\\\\src\\\\App\\\\contexts\\\\authGoogle\\\\index.js\",\n  _s2 = $RefreshSig$();\nimport { useState, createContext, useEffect } from \"react\";\nimport { getAuth, GoogleAuthProvider, signInWithPopup } from \"firebase/auth\";\nimport firebaseConfig from \"../../services/config/firebase\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst provider = new GoogleAuthProvider();\nexport const AuthGoogleContext = /*#__PURE__*/createContext({});\nexport const AuthGoogleProvider = _ref => {\n  _s2();\n  var _s = $RefreshSig$();\n  let {\n    children\n  } = _ref;\n  const auth = getAuth(firebaseConfig);\n  const [user, setUser] = useState(null);\n  useEffect(() => {\n    const loadStorageData = () => {\n      const storageUser = sessionStorage.getItem(\"@AuthFirebase:user\");\n      const storageToken = sessionStorage.getItem(\"@AuthFirebase:token\");\n      if (storageToken && storageUser) {\n        setUser(storageUser);\n      }\n    };\n    loadStorageData();\n  });\n  function signInGoogle() {\n    signInWithPopup(auth, provider).then(result => {\n      const credential = GoogleAuthProvider.credentialFromResult(result);\n      const token = credential.accessToken;\n      const user = result.user;\n      setUser(user);\n      sessionStorage.setItem(\"@AuthFirebase:token\", token);\n      sessionStorage.setItem(\"@AuthFirebase:user\", JSON.stringify(user));\n    }).catch(error => {\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      const email = error.email;\n      const credential = GoogleAuthProvider.credentialFromError(error);\n    });\n  }\n  function signOut() {\n    _s();\n    const navigate = useNavigate();\n    sessionStorage.clear();\n    setUser(null);\n    return /*#__PURE__*/_jsxDEV(\"navigate\", {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 12\n    }, this);\n  }\n  _s(signOut, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n    return [useNavigate];\n  });\n  return /*#__PURE__*/_jsxDEV(AuthGoogleContext.Provider, {\n    value: {\n      signed: !!user,\n      user,\n      signInGoogle,\n      signOut\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n};\n_s2(AuthGoogleProvider, \"5s2qRsV95gTJBmaaTh11GoxYeGE=\");\n_c = AuthGoogleProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthGoogleProvider\");","map":{"version":3,"names":["useState","createContext","useEffect","getAuth","GoogleAuthProvider","signInWithPopup","firebaseConfig","useNavigate","provider","AuthGoogleContext","AuthGoogleProvider","children","auth","user","setUser","loadStorageData","storageUser","sessionStorage","getItem","storageToken","signInGoogle","then","result","credential","credentialFromResult","token","accessToken","setItem","JSON","stringify","catch","error","errorCode","code","errorMessage","message","email","credentialFromError","signOut","navigate","clear","signed"],"sources":["C:/_PROJETOS/Agenda_Aniversariantes/src/App/contexts/authGoogle/index.js"],"sourcesContent":["import { useState, createContext, useEffect } from \"react\";\r\nimport { getAuth, GoogleAuthProvider, signInWithPopup } from \"firebase/auth\";\r\nimport firebaseConfig from \"../../services/config/firebase\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst provider = new GoogleAuthProvider();\r\nexport const AuthGoogleContext = createContext({});\r\n\r\nexport const AuthGoogleProvider = ({ children }) => {\r\n  const auth = getAuth(firebaseConfig);\r\n  const [user, setUser] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const loadStorageData = () => {\r\n      const storageUser = sessionStorage.getItem(\"@AuthFirebase:user\");\r\n      const storageToken = sessionStorage.getItem(\"@AuthFirebase:token\");\r\n      if (storageToken && storageUser) {\r\n        setUser(storageUser);\r\n      }\r\n    };\r\n    loadStorageData();\r\n  });\r\n\r\n  function signInGoogle() {\r\n    signInWithPopup(auth, provider)\r\n      .then((result) => {\r\n        const credential = GoogleAuthProvider.credentialFromResult(result);\r\n        const token = credential.accessToken;\r\n        const user = result.user;\r\n        setUser(user);\r\n        sessionStorage.setItem(\"@AuthFirebase:token\", token);\r\n        sessionStorage.setItem(\"@AuthFirebase:user\", JSON.stringify(user));\r\n      })\r\n      .catch((error) => {\r\n        const errorCode = error.code;\r\n        const errorMessage = error.message;\r\n        const email = error.email;\r\n        const credential = GoogleAuthProvider.credentialFromError(error);\r\n      });\r\n  }\r\n\r\n  function signOut() {\r\n    const navigate = useNavigate();\r\n    sessionStorage.clear();\r\n    setUser(null);\r\n    return <navigate to=\"/\" />;\r\n  }\r\n\r\n  return (\r\n    <AuthGoogleContext.Provider\r\n      value={{\r\n        signed: !!user,\r\n        user,\r\n        signInGoogle,\r\n        signOut,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthGoogleContext.Provider>\r\n  );\r\n};"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,aAAa,EAAEC,SAAS,QAAQ,OAAO;AAC1D,SAASC,OAAO,EAAEC,kBAAkB,EAAEC,eAAe,QAAQ,eAAe;AAC5E,OAAOC,cAAc,MAAM,gCAAgC;AAC3D,SAASC,WAAW,QAAQ,kBAAkB;AAAC;AAE/C,MAAMC,QAAQ,GAAG,IAAIJ,kBAAkB,EAAE;AACzC,OAAO,MAAMK,iBAAiB,gBAAGR,aAAa,CAAC,CAAC,CAAC,CAAC;AAElD,OAAO,MAAMS,kBAAkB,GAAG,QAAkB;EAAA;EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC;EAC7C,MAAMC,IAAI,GAAGT,OAAO,CAACG,cAAc,CAAC;EACpC,MAAM,CAACO,IAAI,EAAEC,OAAO,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAEtCE,SAAS,CAAC,MAAM;IACd,MAAMa,eAAe,GAAG,MAAM;MAC5B,MAAMC,WAAW,GAAGC,cAAc,CAACC,OAAO,CAAC,oBAAoB,CAAC;MAChE,MAAMC,YAAY,GAAGF,cAAc,CAACC,OAAO,CAAC,qBAAqB,CAAC;MAClE,IAAIC,YAAY,IAAIH,WAAW,EAAE;QAC/BF,OAAO,CAACE,WAAW,CAAC;MACtB;IACF,CAAC;IACDD,eAAe,EAAE;EACnB,CAAC,CAAC;EAEF,SAASK,YAAY,GAAG;IACtBf,eAAe,CAACO,IAAI,EAAEJ,QAAQ,CAAC,CAC5Ba,IAAI,CAAEC,MAAM,IAAK;MAChB,MAAMC,UAAU,GAAGnB,kBAAkB,CAACoB,oBAAoB,CAACF,MAAM,CAAC;MAClE,MAAMG,KAAK,GAAGF,UAAU,CAACG,WAAW;MACpC,MAAMb,IAAI,GAAGS,MAAM,CAACT,IAAI;MACxBC,OAAO,CAACD,IAAI,CAAC;MACbI,cAAc,CAACU,OAAO,CAAC,qBAAqB,EAAEF,KAAK,CAAC;MACpDR,cAAc,CAACU,OAAO,CAAC,oBAAoB,EAAEC,IAAI,CAACC,SAAS,CAAChB,IAAI,CAAC,CAAC;IACpE,CAAC,CAAC,CACDiB,KAAK,CAAEC,KAAK,IAAK;MAChB,MAAMC,SAAS,GAAGD,KAAK,CAACE,IAAI;MAC5B,MAAMC,YAAY,GAAGH,KAAK,CAACI,OAAO;MAClC,MAAMC,KAAK,GAAGL,KAAK,CAACK,KAAK;MACzB,MAAMb,UAAU,GAAGnB,kBAAkB,CAACiC,mBAAmB,CAACN,KAAK,CAAC;IAClE,CAAC,CAAC;EACN;EAEA,SAASO,OAAO,GAAG;IAAA;IACjB,MAAMC,QAAQ,GAAGhC,WAAW,EAAE;IAC9BU,cAAc,CAACuB,KAAK,EAAE;IACtB1B,OAAO,CAAC,IAAI,CAAC;IACb,oBAAO;MAAU,EAAE,EAAC;IAAG;MAAA;MAAA;MAAA;IAAA,QAAG;EAC5B;EAAC,GALQwB,OAAO;IAAA,QACG/B,WAAW;EAAA;EAM9B,oBACE,QAAC,iBAAiB,CAAC,QAAQ;IACzB,KAAK,EAAE;MACLkC,MAAM,EAAE,CAAC,CAAC5B,IAAI;MACdA,IAAI;MACJO,YAAY;MACZkB;IACF,CAAE;IAAA,UAED3B;EAAQ;IAAA;IAAA;IAAA;EAAA,QACkB;AAEjC,CAAC;AAAC,IApDWD,kBAAkB;AAAA,KAAlBA,kBAAkB;AAAA;AAAA"},"metadata":{},"sourceType":"module"}